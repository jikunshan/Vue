{"remainingRequest":"D:\\eclipse-workspace\\html-workspace\\Vue\\node_modules\\babel-loader\\lib\\index.js!D:\\eclipse-workspace\\html-workspace\\Vue\\src\\utils\\axios.js","dependencies":[{"path":"D:\\eclipse-workspace\\html-workspace\\Vue\\src\\utils\\axios.js","mtime":1592211455065},{"path":"D:\\eclipse-workspace\\html-workspace\\Vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1591324549952},{"path":"D:\\eclipse-workspace\\html-workspace\\Vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1591324562281}],"contextDependencies":[],"result":["import _objectSpread from \"D:\\\\eclipse-workspace\\\\html-workspace\\\\Vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/objectSpread\";\nimport _typeof from \"D:\\\\eclipse-workspace\\\\html-workspace\\\\Vue\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/typeof\";\nimport axios from 'axios';\nimport qs from 'qs';\nimport util from \"./util.js\";\nvar CancelToken = axios.CancelToken;\nvar httpService = axios.create({\n  baseURL: process.env.VUE_APP_API,\n  timeout: 3000,\n  headers: {\n    'Content-Type': 'application/json;utf-8'\n  },\n  transformRequest: function transformRequest(data, headers) {\n    return data;\n  },\n  paramsSerializer: function paramsSerializer(params) {\n    return util.paramsSerializer(params);\n  }\n});\n\nvar cancelRequest = function cancelRequest(config, data) {\n  var cancel;\n\n  var type = _typeof(data);\n\n  if (typeof data === 'string') {\n    try {\n      return JSON.parse(data);\n    } catch (e) {\n      config.cancelToken = new CancelToken(function (c) {\n        cancel = c;\n      });\n      cancel('参数格式错误：{key:value}\\n' + e.message);\n    }\n  }\n\n  return _objectSpread({}, data);\n};\n\nhttpService.interceptors.request.use(function (config) {\n  if (config.method == 'post') {\n    config.data = JSON.stringify(cancelRequest(config, config.data));\n  } else {\n    config.params = cancelRequest(config, config.params);\n  }\n\n  return config;\n}, function (error) {\n  return Promise.reject(error);\n}); // 响应拦截器\n\nhttpService.interceptors.response.use(function (res) {\n  return Promise.resolve(res.data);\n}, function (error) {\n  return Promise.reject(error);\n});\nexport default httpService;",{"version":3,"sources":["D:\\eclipse-workspace\\html-workspace\\Vue\\src\\utils\\axios.js"],"names":["axios","qs","util","CancelToken","httpService","create","baseURL","process","env","VUE_APP_API","timeout","headers","transformRequest","data","paramsSerializer","params","cancelRequest","config","cancel","type","JSON","parse","e","cancelToken","c","message","interceptors","request","use","method","stringify","error","Promise","reject","response","res","resolve"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,EAAP,MAAe,IAAf;AACA,OAAOC,IAAP;AACA,IAAIC,WAAW,GAAGH,KAAK,CAACG,WAAxB;AAEA,IAAMC,WAAW,GAAGJ,KAAK,CAACK,MAAN,CAAa;AAChCC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,WADW;AAEhCC,EAAAA,OAAO,EAAE,IAFuB;AAGhCC,EAAAA,OAAO,EAAE;AACR,oBAAgB;AADR,GAHuB;AAMhCC,EAAAA,gBAAgB,EAAE,0BAACC,IAAD,EAAOF,OAAP,EAAmB;AACpC,WAAOE,IAAP;AACA,GAR+B;AAShCC,EAAAA,gBAAgB,EAAE,0BAASC,MAAT,EAAiB;AAClC,WAAOb,IAAI,CAACY,gBAAL,CAAsBC,MAAtB,CAAP;AACA;AAX+B,CAAb,CAApB;;AAaA,IAAIC,aAAa,GAAG,SAAhBA,aAAgB,CAASC,MAAT,EAAiBJ,IAAjB,EAAuB;AAC1C,MAAIK,MAAJ;;AACA,MAAIC,IAAI,WAAUN,IAAV,CAAR;;AACA,MAAI,OAAOA,IAAP,KAAgB,QAApB,EAA8B;AAC7B,QAAI;AACH,aAAOO,IAAI,CAACC,KAAL,CAAWR,IAAX,CAAP;AACA,KAFD,CAEE,OAAOS,CAAP,EAAU;AACXL,MAAAA,MAAM,CAACM,WAAP,GAAqB,IAAIpB,WAAJ,CAAgB,UAAAqB,CAAC,EAAI;AACzCN,QAAAA,MAAM,GAAGM,CAAT;AACA,OAFoB,CAArB;AAGAN,MAAAA,MAAM,CAAC,yBAAyBI,CAAC,CAACG,OAA5B,CAAN;AACA;AACD;;AACD,2BAAWZ,IAAX;AACA,CAdD;;AAeAT,WAAW,CAACsB,YAAZ,CAAyBC,OAAzB,CAAiCC,GAAjC,CAAqC,UAAAX,MAAM,EAAI;AAE9C,MAAIA,MAAM,CAACY,MAAP,IAAiB,MAArB,EAA6B;AAC5BZ,IAAAA,MAAM,CAACJ,IAAP,GAAcO,IAAI,CAACU,SAAL,CAAed,aAAa,CAACC,MAAD,EAASA,MAAM,CAACJ,IAAhB,CAA5B,CAAd;AACA,GAFD,MAEO;AACNI,IAAAA,MAAM,CAACF,MAAP,GAAgBC,aAAa,CAACC,MAAD,EAASA,MAAM,CAACF,MAAhB,CAA7B;AACA;;AACD,SAAOE,MAAP;AACA,CARD,EAQG,UAAAc,KAAK,EAAI;AACX,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAVD,E,CAYA;;AACA3B,WAAW,CAACsB,YAAZ,CAAyBQ,QAAzB,CAAkCN,GAAlC,CAAsC,UAAAO,GAAG,EAAI;AAC5C,SAAOH,OAAO,CAACI,OAAR,CAAgBD,GAAG,CAACtB,IAApB,CAAP;AACA,CAFD,EAEG,UAAAkB,KAAK,EAAI;AACX,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACA,CAJD;AAKA,eAAe3B,WAAf","sourcesContent":["import axios from 'axios';\r\nimport qs from 'qs';\r\nimport util from './util.js';\r\nvar CancelToken = axios.CancelToken;\r\n\r\nconst httpService = axios.create({\r\n\tbaseURL: process.env.VUE_APP_API,\r\n\ttimeout: 3000,\r\n\theaders: {\r\n\t\t'Content-Type': 'application/json;utf-8',\r\n\t},\r\n\ttransformRequest: (data, headers) => {\r\n\t\treturn data;\r\n\t},\r\n\tparamsSerializer: function(params) {\r\n\t\treturn util.paramsSerializer(params);\r\n\t},\r\n});\r\nlet cancelRequest = function(config, data) {\r\n\tlet cancel;\r\n\tvar type = typeof data;\r\n\tif (typeof data === 'string') {\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(data);\r\n\t\t} catch (e) {\r\n\t\t\tconfig.cancelToken = new CancelToken(c => {\r\n\t\t\t\tcancel = c;\r\n\t\t\t});\r\n\t\t\tcancel('参数格式错误：{key:value}\\n' + e.message);\r\n\t\t}\r\n\t}\r\n\treturn {...data};\r\n}\r\nhttpService.interceptors.request.use(config => {\r\n\r\n\tif (config.method == 'post') {\r\n\t\tconfig.data = JSON.stringify(cancelRequest(config, config.data));\r\n\t} else {\r\n\t\tconfig.params = cancelRequest(config, config.params);\r\n\t}\r\n\treturn config;\r\n}, error => {\r\n\treturn Promise.reject(error);\r\n})\r\n\r\n// 响应拦截器\r\nhttpService.interceptors.response.use(res => {\r\n\treturn Promise.resolve(res.data);\r\n}, error => {\r\n\treturn Promise.reject(error);\r\n})\r\nexport default httpService;\n"]}]}